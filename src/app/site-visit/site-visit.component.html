<div class="container">
  <h2>Request Visit Information</h2>
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Message</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let visit of siteVisits">
          <td>
            <input *ngIf="editingId === visit.id" [(ngModel)]="visit.name" class="edit-input"/>
            <span *ngIf="editingId !== visit.id">{{ visit.name }}</span>
          </td>
          <td>
            <input *ngIf="editingId === visit.id" [(ngModel)]="visit.phone" class="edit-input"/>
            <span *ngIf="editingId !== visit.id">{{ visit.phone }}</span>
          </td>
          <td>
            <input *ngIf="editingId === visit.id" [(ngModel)]="visit.email" class="edit-input"/>
            <span *ngIf="editingId !== visit.id">{{ visit.email }}</span>
          </td>
          <td>
            <input *ngIf="editingId === visit.id" [(ngModel)]="visit.message" class="edit-input"/>
            <span *ngIf="editingId !== visit.id">{{ visit.message }}</span>
          </td>
          <td class="actions">
            <!-- <button *ngIf="editingId !== visit.id" (click)="startEditing(visit.id)" aria-label="Edit">
              <i class="fas fa-edit"></i> Edit
            </button> -->
            <button *ngIf="editingId === visit.id" (click)="saveEdit(visit.id, visit)" aria-label="Save">
              <i class="fas fa-save"></i> Save
            </button>
            <button (click)="deleteSiteVisit(visit.id)" class="delete" aria-label="Delete">
              <i class="fas fa-trash-alt"></i> Delete
            </button>
            <button (click)="toggleReply(visit.id)" class="reply-btn" aria-label="Reply">
              <i class="fas fa-reply"></i> Reply
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Reply Section -->
  <div class="reply-container" *ngIf="selectedVisitId !== null">
    <input
      type="text"
      [(ngModel)]="replyMessage[selectedVisitId]"
      placeholder="Type your reply..."
      class="reply-input"
      aria-label="Reply message input"
    />
    <button (click)="sendReply(selectedVisitId)" class="reply-btn" aria-label="Send reply">
      <i class="fas fa-reply"></i> Send Reply
    </button>
  </div>
</div>